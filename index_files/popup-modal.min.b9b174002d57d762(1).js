function escapeRegExp(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}if(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),
this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a,b){"object"==typeof exports&&exports?module.exports=b:"function"==typeof define&&define.amd?define(b):a.Mustache=b}(this,function(){function a(a,b){return s.call(a,b)}function b(b){return!a(o,b)}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a){return String(a).replace(/[&<>"'\/]/g,function(a){return v[a]})}function e(a){this.string=a,this.tail=a,this.pos=0}function f(a,b){this.view=a,this.parent=b,this._cache={}}function g(){this.clearCache()}function h(a,b,c,d){for(var e,f,g,i="",j=0,k=a.length;k>j;++j)switch(e=a[j],f=e[1],e[0]){case"#":if(g=c.lookup(f),"object"==typeof g)if(u(g))for(var m=0,n=g.length;n>m;++m)i+=h(e[4],b,c.push(g[m]),d);else g&&(i+=h(e[4],b,c.push(g),d));else if("function"==typeof g){var o=null==d?null:d.slice(e[3],e[5]);g=g.call(c.view,o,function(a){return b.render(a,c)}),null!=g&&(i+=g)}else g&&(i+=h(e[4],b,c,d));break;case"^":g=c.lookup(f),(!g||u(g)&&0===g.length)&&(i+=h(e[4],b,c,d));break;case">":g=b.getPartial(f),"function"==typeof g&&(i+=g(c));break;case"&":g=c.lookup(f),null!=g&&(i+=g);break;case"name":g=c.lookup(f),null!=g&&(i+=l.escape(g));break;case"text":i+=f}return i}function i(a){for(var b,c=[],d=c,e=[],f=0,g=a.length;g>f;++f)switch(b=a[f],b[0]){case"#":case"^":e.push(b),d.push(b),d=b[4]=[];break;case"/":var h=e.pop();h[5]=b[2],d=e.length>0?e[e.length-1][4]:c;break;default:d.push(b)}return c}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(c=b,d.push(b)));return d}function k(a){return[new RegExp(c(a[0])+"\\s*"),new RegExp("\\s*"+c(a[1]))]}var l={};l.name="mustache.js",l.version="0.7.2",l.tags=["{{","}}"],l.Scanner=e,l.Context=f,l.Writer=g;var m=/\s*/,n=/\s+/,o=/\S/,p=/\s*=/,q=/\s*\}/,r=/#|\^|\/|>|\{|&|=|!/,s=RegExp.prototype.test,t=Object.prototype.toString,u=Array.isArray||function(a){return"[object Array]"===t.call(a)},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};l.escape=d,e.prototype.eos=function(){return""===this.tail},e.prototype.scan=function(a){var b=this.tail.match(a);return b&&0===b.index?(this.tail=this.tail.substring(b[0].length),this.pos+=b[0].length,b[0]):""},e.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b},f.make=function(a){return a instanceof f?a:new f(a)},f.prototype.push=function(a){return new f(a,this)},f.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var d=a.split("."),e=0;b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return"function"==typeof b&&(b=b.call(this.view)),b},g.prototype.clearCache=function(){this._cache={},this._partialCache={}},g.prototype.compile=function(a,b){var c=this._cache[a];if(!c){var d=l.parse(a,b);c=this._cache[a]=this.compileTokens(d,a)}return c},g.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);return this._partialCache[a]=d,d},g.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]},g.prototype.compileTokens=function(a,b){var c=this;return function(d,e){if(e)if("function"==typeof e)c._loadPartial=e;else for(var g in e)c.compilePartial(g,e[g]);return h(a,c,f.make(d),b)}},g.prototype.render=function(a,b,c){return this.compile(a)(b,c)},l.parse=function(a,d){function f(){if(z&&!A)for(;y.length;)delete x[y.pop()];else y=[];z=!1,A=!1}if(a=a||"",d=d||l.tags,"string"==typeof d&&(d=d.split(n)),2!==d.length)throw new Error("Invalid tags: "+d.join(", "));for(var g,h,o,s,t,u=k(d),v=new e(a),w=[],x=[],y=[],z=!1,A=!1;!v.eos();){if(g=v.pos,o=v.scanUntil(u[0]))for(var B=0,C=o.length;C>B;++B)s=o.charAt(B),b(s)?y.push(x.length):A=!0,x.push(["text",s,g,g+1]),g+=1,"\n"==s&&f();if(!v.scan(u[0]))break;if(z=!0,h=v.scan(r)||"name",v.scan(m),"="===h?(o=v.scanUntil(p),v.scan(p),v.scanUntil(u[1])):"{"===h?(o=v.scanUntil(new RegExp("\\s*"+c("}"+d[1]))),v.scan(q),v.scanUntil(u[1]),h="&"):o=v.scanUntil(u[1]),!v.scan(u[1]))throw new Error("Unclosed tag at "+v.pos);if(t=[h,o,g,v.pos],x.push(t),"#"===h||"^"===h)w.push(t);else if("/"===h){if(0===w.length)throw new Error('Unopened section "'+o+'" at '+g);var D=w.pop();if(D[1]!==o)throw new Error('Unclosed section "'+D[1]+'" at '+g)}else if("name"===h||"{"===h||"&"===h)A=!0;else if("="===h){if(d=o.split(n),2!==d.length)throw new Error("Invalid tags at "+g+": "+d.join(", "));u=k(d)}}var D=w.pop();if(D)throw new Error('Unclosed section "'+D[1]+'" at '+v.pos);return x=j(x),i(x)};var w=new g;return l.clearCache=function(){return w.clearCache()},l.compile=function(a,b){return w.compile(a,b)},l.compilePartial=function(a,b,c){return w.compilePartial(a,b,c)},l.compileTokens=function(a,b){return w.compileTokens(a,b)},l.render=function(a,b,c){return w.render(a,b,c)},l.to_html=function(a,b,c,d){var e=l.render(a,b,c);return"function"!=typeof d?e:void d(e)},l}()),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){if(!a.contains(document.documentElement,this))return a(this).timeago("dispose"),this;var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||Math.abs(e(b.datetime))<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;if(this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow),!this.settings.allowPast&&b>=0)return this.settings.strings.inPast;var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=f.isTime(b)?a(b).attr("datetime"):a(b).attr("title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(f.isTime(this)?a(this).attr("datetime"):a(this).attr("title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.viewportUnitsBuggyfill=b()}(this,function(){"use strict";function a(a,b){var c;return function(){var d=this,e=arguments,f=function(){a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}function b(){try{return window.self!==window.top}catch(a){return!0}}function c(c){if(!t){if(c===!0&&(c={force:!0}),p=c||{},p.isMobileSafari=A,p.isBadStockAndroid=B,y||!p.force&&!A&&!x&&!B&&!z&&(!p.hacks||!p.hacks.required(p)))return window.console&&y&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};window.dispatchEvent(new D("viewport-units-buggyfill-init")),p.hacks&&p.hacks.initialize(p),t=!0,s=document.createElement("style"),s.id="patched-viewport",document.head.appendChild(s),l(function(){var c=a(e,p.refreshDebounceWait||100);window.addEventListener("orientationchange",c,!0),window.addEventListener("pageshow",c,!0),(p.force||x||b())&&(window.addEventListener("resize",c,!0),p._listeningToResize=!0),p.hacks&&p.hacks.initializeEvents(p,e,c),e()})}}function d(){s.textContent=h(),s.parentNode.appendChild(s),window.dispatchEvent(new D("viewport-units-buggyfill-style"))}function e(){t&&(f(),setTimeout(function(){d()},1))}function f(){return r=[],w.call(document.styleSheets,function(a){"patched-viewport"!==a.ownerNode.id&&a.cssRules&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(a.media&&a.media.mediaText&&window.matchMedia&&!window.matchMedia(a.media.mediaText).matches||w.call(a.cssRules,g))}),r}function g(a){if(7===a.type){var b;try{b=a.cssText}catch(c){return}return v.lastIndex=0,void(v.test(b)&&(r.push([a,null,b]),p.hacks&&p.hacks.findDeclarations(r,a,null,b)))}if(!a.style){if(!a.cssRules)return;return void w.call(a.cssRules,function(a){g(a)})}w.call(a.style,function(b){var c=a.style.getPropertyValue(b);a.style.getPropertyPriority(b)&&(c+=" !important"),v.lastIndex=0,v.test(c)&&(r.push([a,b,c]),p.hacks&&p.hacks.findDeclarations(r,a,b,c))})}function h(){q=k();var a,b,c=[],d=[];return r.forEach(function(e){var f=i.apply(null,e),g=f.selector.length?f.selector.join(" {\n")+" {\n":"",h=new Array(f.selector.length+1).join("\n}");return g&&g===a?(g&&!a&&(a=g,b=h),void d.push(f.content)):(d.length&&(c.push(a+d.join("\n")+b),d.length=0),void(g?(a=g,b=h,d.push(f.content)):(c.push(f.content),a=null,b=null)))}),d.length&&c.push(a+d.join("\n")+b),z&&c.push("* { content: normal !important; }"),c.join("\n\n")}function i(a,b,c){var d,e=[];d=c.replace(v,j),p.hacks&&(d=p.hacks.overwriteDeclaration(a,b,d)),b&&(e.push(a.selectorText),d=b+": "+d+";");for(var f=a.parentRule;f;)e.unshift("@media "+f.media.mediaText),f=f.parentRule;return{selector:e,content:d}}function j(a,b,c){var d=q[c],e=parseFloat(b)/100;return e*d+"px"}function k(){var a=window.innerHeight,b=window.innerWidth;return{vh:a,vw:b,vmax:Math.max(b,a),vmin:Math.min(b,a)}}function l(a){var b=0,c=function(){b--,b||a()};w.call(document.styleSheets,function(a){a.href&&m(a.href)!==m(location.href)&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(b++,n(a.ownerNode,c))}),b||a()}function m(a){return a.slice(0,a.indexOf("/",a.indexOf("://")+3))}function n(a,b){o(a.href,function(){var c=document.createElement("style");c.media=a.media,c.setAttribute("data-href",a.href),c.textContent=this.responseText,a.parentNode.replaceChild(c,a),b()},b)}function o(a,b,c){var d=new XMLHttpRequest;if("withCredentials"in d)d.open("GET",a,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");d=new XDomainRequest,d.open("GET",a)}return d.onload=b,d.onerror=c,d.send(),d}var p,q,r,s,t=!1,u=window.navigator.userAgent,v=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,w=[].forEach,x=/MSIE [0-9]\./i.test(u),y=/MSIE [0-8]\./i.test(u),z=u.indexOf("Opera Mini")>-1,A=/(iPhone|iPod|iPad).+AppleWebKit/i.test(u)&&function(){var a=u.match(/OS (\d)/);return a&&a.length>1&&parseInt(a[1])<8}(),B=function(){var a=u.indexOf(" Android ")>-1;if(!a)return!1;var b=u.indexOf("Version/")>-1;if(!b)return!1;var c=parseFloat((u.match("Android ([0-9.]+)")||[])[1]);return 4.4>=c}();x||(x=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./));try{new D("test")}catch(C){var D=function(a,b){var c;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};D.prototype=window.Event.prototype,window.CustomEvent=D}return{version:"0.5.5",findProperties:f,getCss:h,init:c,refresh:e}}),function(a,b,c){function d(b,c){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=a(b),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=a.extend({},i,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function e(b,c){var d=!0;return a.each(b,function(a,e){return"undefined"==typeof c[a]||b[a]!==c[a]?(d=!1,!1):void 0}),d}function f(){return!k&&j}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(a){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={_init:function(){var b=this;if(c.querySelector){var d=null;void 0===b.$el.data("tooltipster-initialTitle")&&(d=b.$el.attr("title"),void 0===d&&(d=null),b.$el.data("tooltipster-initialTitle",d)),null!==b.options.content?b._content_set(b.options.content):b._content_set(d);var e=b.options.functionInit.call(b.$el,b.$el,b.Content);"undefined"!=typeof e&&b._content_set(e),b.$el.removeAttr("title").addClass("tooltipstered"),!j&&b.options.iconDesktop||j&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){(!f()||b.options.touchDevices)&&(b.mouseIsOverProxy=!0,b._show())}).on("mouseleave."+b.namespace,function(){(!f()||b.options.touchDevices)&&(b.mouseIsOverProxy=!1)}),j&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b._showNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){(!f()||b.options.touchDevices)&&b._show()})}},_show:function(){var a=this;"shown"!=a.Status&&"appearing"!=a.Status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a._showNow()},a.options.delay):a._showNow())},_showNow:function(c){var d=this;d.options.functionBefore.call(d.$el,d.$el,function(){if(d.enabled&&null!==d.Content){c&&d.callbacks.show.push(c),d.callbacks.hide=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null,d.options.onlyOne&&a(".tooltipstered").not(d.$el).each(function(b,c){var d=a(c),e=d.data("tooltipster-ns");a.each(e,function(a,b){var c=d.data(b),e=c.status(),f=c.option("autoClose");"hidden"!==e&&"disappearing"!==e&&f&&c.hide()})});var e=function(){d.Status="shown",a.each(d.callbacks.show,function(a,b){b.call(d.$el)}),d.callbacks.show=[]};if("hidden"!==d.Status){var f=0;"disappearing"===d.Status?(d.Status="appearing",g()?(d.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+d.options.animation+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.stop().fadeIn(e)):"shown"===d.Status&&e()}else{d.Status="appearing";var f=d.options.speed;d.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var h="tooltipster-"+d.options.animation,i="-webkit-transition-duration: "+d.options.speed+"ms; -webkit-animation-duration: "+d.options.speed+"ms; -moz-transition-duration: "+d.options.speed+"ms; -moz-animation-duration: "+d.options.speed+"ms; -o-transition-duration: "+d.options.speed+"ms; -o-animation-duration: "+d.options.speed+"ms; -ms-transition-duration: "+d.options.speed+"ms; -ms-animation-duration: "+d.options.speed+"ms; transition-duration: "+d.options.speed+"ms; animation-duration: "+d.options.speed+"ms;",k=d.options.minWidth?"min-width:"+Math.round(d.options.minWidth)+"px;":"",l=d.options.maxWidth?"max-width:"+Math.round(d.options.maxWidth)+"px;":"",m=d.options.interactive?"pointer-events: auto;":"";if(d.$tooltip=a('<div class="tooltipster-base '+d.options.theme+'" style="'+k+" "+l+" "+m+" "+i+'"><div class="tooltipster-content"></div></div>'),g()&&d.$tooltip.addClass(h),d._content_insert(),d.$tooltip.appendTo("body"),d.reposition(),d.options.functionReady.call(d.$el,d.$el,d.$tooltip),g()?(d.$tooltip.addClass(h+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.css("display","none").fadeIn(d.options.speed,e),d._interval_set(),a(b).on("scroll."+d.namespace+" resize."+d.namespace,function(){d.reposition()}),d.options.autoClose)if(a("body").off("."+d.namespace),"hover"==d.options.trigger){if(j&&setTimeout(function(){a("body").on("touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive){j&&d.$tooltip.on("touchstart."+d.namespace,function(a){a.stopPropagation()});var n=null;d.$elProxy.add(d.$tooltip).on("mouseleave."+d.namespace+"-autoClose",function(){clearTimeout(n),n=setTimeout(function(){d.hide()},d.options.interactiveTolerance)}).on("mouseenter."+d.namespace+"-autoClose",function(){clearTimeout(n)})}else d.$elProxy.on("mouseleave."+d.namespace+"-autoClose",function(){d.hide()});d.options.hideOnClick&&d.$elProxy.on("click."+d.namespace+"-autoClose",function(){d.hide()})}else"click"==d.options.trigger&&(setTimeout(function(){a("body").on("click."+d.namespace+" touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive&&d.$tooltip.on("click."+d.namespace+" touchstart."+d.namespace,function(a){a.stopPropagation()}))}d.options.timer>0&&(d.timerHide=setTimeout(function(){d.timerHide=null,d.hide()},d.options.timer+f))}})},_interval_set:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.Status||0===a("body").find(b.$tooltip).length)("shown"==b.Status||"appearing"==b.Status)&&b.hide(),b._interval_cancel();else if(b.options.positionTracker){var c=b._repositionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||(b.reposition(),b.options.positionTrackerCallback.call(b,b.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.Content=a},_content_insert:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.Content||a.options.contentAsHTML?b.empty().append(a.Content):b.text(a.Content)},_update:function(a){var b=this;b._content_set(a),null!==b.Content?"hidden"!==b.Status&&(b._content_insert(),b.reposition(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.Status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.Status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.Status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hide()},_repositionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},hide:function(c){var d=this;c&&d.callbacks.hide.push(c),d.callbacks.show=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null;var e=function(){a.each(d.callbacks.hide,function(a,b){b.call(d.$el)}),d.callbacks.hide=[]};if("shown"==d.Status||"appearing"==d.Status){d.Status="disappearing";var f=function(){d.Status="hidden","object"==typeof d.Content&&null!==d.Content&&d.Content.detach(),d.$tooltip.remove(),d.$tooltip=null,a(b).off("."+d.namespace),a("body").off("."+d.namespace).css("overflow-x",d.bodyOverflowX),a("body").off("."+d.namespace),d.$elProxy.off("."+d.namespace+"-autoClose"),d.options.functionAfter.call(d.$el,d.$el),e()};g()?(d.$tooltip.clearQueue().removeClass("tooltipster-"+d.options.animation+"-show").addClass("tooltipster-dying"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(f)):d.$tooltip.stop().fadeOut(d.options.speed,f)}else"hidden"==d.Status&&e();return d},show:function(a){return this._showNow(a),this},update:function(a){return this.content(a)},content:function(a){return"undefined"==typeof a?this.Content:(this._update(a),this)},reposition:function(){function c(){var c=a(b).scrollLeft();0>C-c&&(f=C-c,C=c),C+i-c>g&&(f=C-(g+c-i),C=g+c-i)}function d(c,d){h.offset.top-a(b).scrollTop()-j-F-12<0&&d.indexOf("top")>-1&&(H=c),h.offset.top+h.dimension.height+j+12+F>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(H=c,E=h.offset.top-j-F-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e._repositionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,i=e.$tooltip.outerWidth(!1),j=(e.$tooltip.innerWidth()+1,e.$tooltip.outerHeight(!1));if(e.$elProxy.is("area")){var k=e.$elProxy.attr("shape"),l=e.$elProxy.parent().attr("name"),m=a('img[usemap="#'+l+'"]'),n=m.offset().left,o=m.offset().top,p=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==k){var q=parseInt(p[0]),r=parseInt(p[1]),s=parseInt(p[2]);h.dimension.height=2*s,h.dimension.width=2*s,h.offset.top=o+r-s,h.offset.left=n+q-s}else if("rect"==k){var q=parseInt(p[0]),r=parseInt(p[1]),t=parseInt(p[2]),u=parseInt(p[3]);h.dimension.height=u-r,h.dimension.width=t-q,h.offset.top=o+r,h.offset.left=n+q}else if("poly"==k){for(var v=0,w=0,x=0,y=0,z="even",A=0;A<p.length;A++){var B=parseInt(p[A]);"even"==z?(B>x&&(x=B,0===A&&(v=x)),v>B&&(v=B),z="odd"):(B>y&&(y=B,1==A&&(w=y)),w>B&&(w=B),z="even")}h.dimension.height=y-w,h.dimension.width=x-v,h.offset.top=o+w,h.offset.left=n+v}else h.dimension.height=m.outerHeight(!1),h.dimension.width=m.outerWidth(!1),h.offset.top=o,h.offset.left=n}var C=0,D=0,E=0,F=parseInt(e.options.offsetY),G=parseInt(e.options.offsetX),H=e.options.position;if("top"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left+G-I/2,E=h.offset.top-j-F-12,c(),d("bottom","top")}if("top-left"==H&&(C=h.offset.left+G,E=h.offset.top-j-F-12,c(),d("bottom-left","top-left")),"top-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top-j-F-12,c(),d("bottom-right","top-right")),"bottom"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left-I/2+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top","bottom")}if("bottom-left"==H&&(C=h.offset.left+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top-left","bottom-left")),"bottom-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top+h.dimension.height+F+12,c(),d("top-right","bottom-right")),"left"==H){C=h.offset.left-G-i-12,D=h.offset.left+G+h.dimension.width+12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,0>C&&D+i>g){var K=2*parseFloat(e.$tooltip.css("border-width")),L=i+C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),C=h.offset.left-G-L-12-K,J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else 0>C&&(C=h.offset.left+G+h.dimension.width+12,f="left")}if("right"==H){C=h.offset.left+G+h.dimension.width+12,D=h.offset.left-G-i-12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,C+i>g&&0>D){var K=2*parseFloat(e.$tooltip.css("border-width")),L=g-C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else C+i>g&&(C=h.offset.left-G-i-12,f="right")}if(e.options.arrow){var M="tooltipster-arrow-"+H;if(e.options.arrowColor.length<1)var N=e.$tooltip.css("background-color");else var N=e.options.arrowColor;if(f?"left"==f?(M="tooltipster-arrow-right",f=""):"right"==f?(M="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==H||"top-left"==H||"top-right"==H)var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");else if("bottom"==H||"bottom-left"==H||"bottom-right"==H)var O=parseFloat(e.$tooltip.css("border-top-width")),P=e.$tooltip.css("border-top-color");else if("left"==H)var O=parseFloat(e.$tooltip.css("border-right-width")),P=e.$tooltip.css("border-right-color");else if("right"==H)var O=parseFloat(e.$tooltip.css("border-left-width")),P=e.$tooltip.css("border-left-color");else var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");O>1&&O++;var Q="";if(0!==O){var R="",S="border-color: "+P+";";-1!==M.indexOf("bottom")?R="margin-top: -"+Math.round(O)+"px;":-1!==M.indexOf("top")?R="margin-bottom: -"+Math.round(O)+"px;":-1!==M.indexOf("left")?R="margin-right: -"+Math.round(O)+"px;":-1!==M.indexOf("right")&&(R="margin-left: -"+Math.round(O)+"px;"),Q='<span class="tooltipster-arrow-border" style="'+R+" "+S+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var T='<div class="'+M+' tooltipster-arrow" style="'+f+'">'+Q+'<span style="border-color:'+N+';"></span></div>';e.$tooltip.append(T)}e.$tooltip.css({top:Math.round(E)+"px",left:Math.round(C)+"px"})}return e},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var b=this;b.hide(),b.$el[0]!==b.$elProxy[0]&&b.$elProxy.remove(),b.$el.removeData(b.namespace).off("."+b.namespace);var c=b.$el.data("tooltipster-ns");if(1===c.length){var d=null;"previous"===b.options.restoration?d=b.$el.data("tooltipster-initialTitle"):"current"===b.options.restoration&&(d="string"==typeof b.Content?b.Content:a("<div></div>").append(b.Content).html()),d&&b.$el.attr("title",d),b.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else c=a.grep(c,function(a,c){return a!==b.namespace}),b.$el.data("tooltipster-ns",c);return b},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(a,b){return"undefined"==typeof b?this.options[a]:(this.options[a]=b,this)},status:function(){return this.Status}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(i,b[1]);break;default:c=!1}return c?!0:this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster-ns"),d=c?a(this).data(c[0]):null;if(!d)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');if("function"!=typeof d[b[0]])throw new Error('Unknown method .tooltipster("'+b[0]+'")');var f=d[b[0]](b[1],b[2]);return f!==d?(e=f,!1):void 0}),"#*$~&"!==e?e:this}var f=[],g=b[0]&&"undefined"!=typeof b[0].multiple,h=g&&b[0].multiple||!g&&i.multiple,j=b[0]&&"undefined"!=typeof b[0].debug,k=j&&b[0].debug||!j&&i.debug;return this.each(function(){var c=!1,e=a(this).data("tooltipster-ns"),g=null;e?h?c=!0:k&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):c=!0,c&&(g=new d(this,b[0]),e||(e=[]),e.push(g.namespace),a(this).data("tooltipster-ns",e),a(this).data(g.namespace,g)),f.push(g)}),h?f:this};var j=!!("ontouchstart"in b),k=!1;a("body").one("mousemove",function(){k=!0})}(jQuery,window,document),function(a){var b=/(\s*\S+|\s)$/;a.truncate=function(b,c){return a("<div></div>").append(b).truncate(c).html()},a.fn.truncate=function(c){a.isNumeric(c)&&(c={length:c});var d=a.extend({},a.truncate.defaults,c);return this.each(function(){
var c=a(this);d.noBreaks&&c.find("br").replaceWith(" ");var e=c.text(),f=e.length-d.length;d.stripTags&&c.text(e),d.words&&f>0&&(f=e.length-e.slice(0,d.length).replace(b,"").length-1),0>f||!f&&!d.truncated||a.each(c.contents().get().reverse(),function(b,c){var e=a(c),g=e.text(),h=g.length;return f>=h?(d.truncated=!0,f-=h,void e.remove()):3===c.nodeType?(a(c.splitText(h-f-1)).replaceWith(d.ellipsis),!1):(e.truncate(a.extend(d,{length:h-f})),!1)})})},a.truncate.defaults={stripTags:!1,words:!1,noBreaks:!1,length:1/0,ellipsis:""}}(jQuery),"undefined"==typeof HM)var HM={};HM.TemplateManager={templates:{},mustacheTemplates:{},get:function(a,b){var c=this.templates[a];if(c&&c.promise)c.done(b);else if(c)b(c);else{var d=$("#"+a);if(1===d.length){var e=d.html();this.templates[a]=e,b(e)}else{var f=this,g=$.Deferred();this.templates[a]=g,$.get("/templates/"+a).done(function(c){f.templates[a]=c,b(c),g.resolve(c)}).fail(function(){console.log("something went wrong getting the template")})}}}},HM.padzero=function(a){return 10>a?"0"+a:a},HM.pad2zeros=function(a){return 100>a&&(a="0"+a),10>a&&(a="0"+a),a},HM.toISOString=function(a){return a.getUTCFullYear()+"-"+HM.padzero(a.getUTCMonth()+1)+"-"+HM.padzero(a.getUTCDate())+"T"+HM.padzero(a.getUTCHours())+":"+HM.padzero(a.getUTCMinutes())+":"+HM.padzero(a.getUTCSeconds())+"."+HM.pad2zeros(a.getUTCMilliseconds())+"Z"},HM.fnToISO=function(){var a=new Date;alert(HM.toISOString(a))},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),HM.logError=function(a){console.log(a.toString()+" "+a.lineNumber+" "+a.fileName+" "+a.stack)},HM.getParameter=function(a,b){try{"undefined"==typeof b&&(b=window.location.href);var c,d,e=b.split("?")[1],f=e.split("&");for(c=0;c<f.length;c++)if(d=f[c].split("="),d[0]==a)return unescape(d[1]);return null}catch(g){return null}},HM.rgb2hex=function(a,b,c){function d(a){var b=a.toString(16);return 1==b.length?"0"+b:b}return"#"+d(a)+d(b)+d(c)},HM.toHHMMSS=function(a){var b=parseInt(a,10),c=Math.floor(b/3600),d=Math.floor((b-3600*c)/60),a=b-3600*c-60*d;10>c&&(c="0"+c),10>d&&(d="0"+d),10>a&&(a="0"+a);var e=c+":"+d+":"+a;return e},HM.getWindow=function(){return window},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"dev"===HM.env||"test"===HM.env||"demo"===HM.env||HM.getParameter("log",window.location.href)||(console={},console.log=console.error=function(){}),HM.fixedEncodeURIComponent=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape)},HM.singlePageViewUrls=/youtube|vimeo|instagram|soundcloud|flickr|slideshare/,$.ajaxSetup({xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"}}),Backbone.View=function(a){return a.extend({constructor:function(b){this.options=b||{},a.apply(this,arguments)}})}(Backbone.View),HM.Cloudinary=function(){function a(a){return _(a).map(function(a,b){return[d[b],a].join("_")}).join(",")}function b(c,d){var e=b.parse(c);return e.base?(d=a(d),e.base+(d?d+"/":"")+e.image):c}function c(a,b,c){return a.exec(b)&&a.exec(b)[c]}var d={format:"f",crop:"c",height:"h",width:"w",angle:"a",gravity:"g",flag:"fl",quality:"q"},e=_.invert(d),f={CLOUDINARY_FETCH_URL:/(.*\/image\/fetch\/)/,CLOUDINARY_SOCIAL_AUTHOR_URL:/(.*\/(?:twitter_name|instagram_name)\/)/,FILTERS:/\/image\/fetch\/(.*\/?)/,CLOUDINARY_SOCIAL_AUTHOR_FILTERS:/\/(?:twitter_name|instagram_name)\/(.*\/?)/,IMAGE:/\/(https?:.*)/,USERNAME:/\/([^\/]+$)/};return b.replace=function(a,c){var d=b.parse(a);return b(a,_.extend(d.filters,c))},b.parse=function(a){var b=c(f.CLOUDINARY_FETCH_URL,a,1),d=c(f.IMAGE,a,1),g=c(f.FILTERS,a.replace("/"+d,""),1)||"";return b||(b=c(f.CLOUDINARY_SOCIAL_AUTHOR_URL,a,1),d=c(f.USERNAME,a,1),g=c(f.CLOUDINARY_SOCIAL_AUTHOR_FILTERS,a.replace(new RegExp("/"+d,"g"),""),1)||""),g=_.inject(g.split(","),function(a,b){var c=b.split("_");return a[e[c[0]]]=c[1],a},{}),{base:b,image:d,filters:g}},b}(),HM.PopupModalView=Backbone.View.extend({template:"popupModalTemplate",RIGHT_KEY:39,LEFT_KEY:37,ESCAPE_KEY:27,HIDE_TRANSITION_TIME:300,initialize:function(a){var b=this;$(window).on("keyup",function(a){a.which==b.RIGHT_KEY?b.cyclePostsRight(a):a.which==b.LEFT_KEY?b.cyclePostsLeft(a):a.which==b.ESCAPE_KEY&&b.close(a)}),this.initialized=!1},bootstrap:function(a){this.posts=new HM.HypeCollection(a.posts),this.profile=new Backbone.Model(a.profile),this.loadPersonalizations()},show:function(a){function b(a){var b,c;try{c=JSON.parse(a.get("cta"))}catch(d){c={}}return _.isEmpty(c)?b=HM.hypeHelper.loadCtaMetaData(e.profile.toJSON(),{social_feed_id:a.get("social_feed_id")}):(b={},b.cta_display="inherit",b.cta_url=c.url,b.cta_text=c.text,b.cta_color=c.color,b.cta_icon=c.icon,b.cta_text_color=c.text_color),b}function c(a){var c=a.toJSON(),d=HM.hypeHelper.generateEmbed(c),f=b(a);return c.acct_image=c.acct_image.indexOf("d33w9bm0n1egwm.cloudfront.net")>=0?"":c.acct_image,d=d&&d.indexOf(src='"undefined"')>=0?!1:d,_.extend(c,{image:e.imageForPost(a),timeago:c.timeago,fburl:"http://www.facebook.com/sharer.php?u="+encodeURIComponent(c.url)+"&t="+encodeURIComponent(c.title),twurl:"https://twitter.com/intent/tweet?url="+encodeURIComponent(c.url)+"&text="+encodeURIComponent(c.title),emailurl:"mailto:?subject="+encodeURIComponent("Check out this link I found!")+"&body="+encodeURIComponent(c.url+" via "+window.location.href),cta:f,has_cta:!!f.cta_url,is_twitter:parseInt(c.source,10)===HM.Hype.SOURCES.TWITTER,embed:d})}var d=this.posts.at(a),e=this;this.index=a,this.preload(this.posts.at(this.index+1)),this.preload(this.posts.at(this.index-1)),this.postJSON=c(d),this.render()},loadPersonalizations:function(){if(!this.initialized){HM.PersonalizedThemeStylesheet.loadFont(this.profile,{"data-viewport-units-buggyfill":"ignore"});var a;try{a=$.parseJSON(this.profile.get("embed_display_profile"))||{}}catch(b){a={}}var c=this.ignore_accent_color(this.profile.get("color_namebar_buttons"))?"#000000":this.profile.get("color_namebar_buttons"),d=a.font_secondary,e=this.profile.get("font_secondary");$("head").append("<style>._71n7_title { font-family: '"+e+"', sans-serif; color: "+d+" }</style>"),$("head").append("<style>._71n7_title a.external-link { color: "+c+"} .accent-color-hover:hover { color: "+c+" }"),$("head").append("<style>._71n7_title a.external-link:hover { color: "+HM.PersonalizedThemeStylesheet.hexToRGB(c,-40,1)+"}"),this.initialized=!0}},ignore_accent_color:function(a){a=a.replace("#","");var b=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,2),16),d=parseInt(a.substr(4,2),16),e=(299*b+587*c+114*d)/1e3;return e>230},serializeData:function(){var a=this.initializeShareTooltip().$el;return _.extend(this.postJSON,{is_display_theme:this.profile.get("hideControls"),font_secondary:this.profile.get("font_secondary"),shareTooltip:a.html()})},render:function(){var a=this;return HM.TemplateManager.get(this.template,function(b){$(a.el).html(Mustache.render(b,a.serializeData())),$(a.el).find(".post-share-open").tooltipster({trigger:"click",theme:"share-options",content:$(a.el).find(".share-options-menu").html(),contentAsHTML:!0,interactive:!0}),a.$("img._71n7_image").on("error",_.bind(a.makeTextOnly,a)),a.applyTextSizing(),setTimeout(function(){a.$el.addClass("_71n7_modal_show")},0)}),this.$("._71n7_title a").click(function(a){a.stopPropagation()}),this},applyTextSizing:function(){new HM.PostModalTextResizer(this.$("._71n7_title"),this.postJSON.modified_title).execute()},initializeShareTooltip:function(){var a=new HM.ShareTooltipView({model:this.postJSON,offset:this.postJSON});return a.render()},close:function(a){a.preventDefault();var b=this;this.$el.removeClass("_71n7_modal_show"),setTimeout(function(){HM.CompatiblePostMessage.trigger(window.parent,"_71n7_modal_close"),b.$el.empty()},this.HIDE_TRANSITION_TIME)},goToCTA:function(a){a.preventDefault(),hmAnalytics.track("CTA Clickthrough",{post_id:this.postJSON.post_id,tint:this.profile.get("user_name"),tint_id:this.profile.get("user_id"),feed_id:this.postJSON.social_id}),window.open(this.postJSON.cta.cta_url,"_blank")},goToLink:function(a){a.preventDefault(),this.postJSON.modified_url&&window.open(this.postJSON.modified_url,"_blank")},makeTextOnly:function(){this.$("._71n7_image_holder").remove(),this.$("._71n7_content_holder").addClass("_71n7_content_holder_text_only"),this.applyTextSizing()},cyclePostsRight:function(a){a.preventDefault();var b=(this.index+1)%this.posts.length;this.show(b);var c=this.posts.at(b);hmAnalytics.track("Post Clickthrough",{post_id:c.get("post_id"),tint:this.profile.get("user_name"),feed_id:c.get("social_id"),tint_id:this.profile.get("id")})},cyclePostsLeft:function(a){a.preventDefault();var b=0===this.index?this.posts.length-1:this.index-1;this.show(b);var c=this.posts.at(b);hmAnalytics.track("Post Clickthrough",{post_id:c.get("post_id"),tint:this.profile.get("user_name"),feed_id:c.get("social_id"),tint_id:this.profile.get("id")})},preload:function(a){var b,c;a&&a.get("original_image")&&(b=new Image,b.src=this.imageForPost(a)),a&&a.get("acct_image")&&(c=new Image,c.src=a.get("acct_image"))},imageForPost:function(a){return HM.Cloudinary(a.get("image"),{width:1e3,height:1e3,crop:"limit",format:"auto",flag:"lossy"})},events:{"click ._71n7_modal_close, .popup-modal-bg":"close","click ._71n7_modal_right":"cyclePostsRight","click ._71n7_modal_left":"cyclePostsLeft","click ._71n7_cta button":"goToCTA","click ._71n7_title":"goToLink"}}),function(a){function b(a,b){var d=a.find("span");this.execute=function(){var e=this.resizeText(a,d);e!=c&&this.truncateText(a,d,b)}}var c=1,d=2,e=["normal","smaller","small"],f=1;b.prototype.maxHeight=function(a){return parseInt(a.css("max-height"),10)-parseInt(a.css("padding-top"),10)+f},b.prototype.resizeText=function(a,b){for(var f=0;f<e.length;f++)if(a.removeClass("font-size-"+e[f-1]),a.addClass("font-size-"+e[f]),b.outerHeight()<=this.maxHeight(a))return c;return d},b.prototype.truncateText=function(a,b,c){b.html(c);for(var d=$.trim(b.text()).length,e=0;b.outerHeight()>this.maxHeight(a)&&200>e;)e++,b.html($.truncate(b.html(),{length:d-3,noBreaks:!0,words:!0})),d=$.trim(b.text()).length},a.HM.PostModalTextResizer=b}(window),HM="undefined"==typeof HM?{}:HM,HM.CompatiblePostMessage=function(){function a(a){try{return JSON.parse(a),!0}catch(b){return!1}}function b(a,b){var c="undefined"==typeof window.addEventListener?"attachEvent":"addEventListener";window[c](a,b,!1)}return{listenTo:function(c,d){b("message",function(b){if(a(b.data)){var e=JSON.parse(b.data);e.message==c&&d(e)}})},trigger:function(a,b,c){c=c||{},c.message=b,a.postMessage(JSON.stringify(c),"*")}}}(),"object"!=typeof HM?HM={hypeHelper:{}}:"object"==typeof HM&&"object"!=typeof HM.hypeHelper&&(HM.hypeHelper={}),function(a){var b={accountNames:["facebook_accounts","twitter_accounts","instagram_accounts","youtube_accounts","pinterest_accounts","rss_accounts","googleplus_accounts","linkedin_accounts","vine_accounts","tumblr_accounts","flickr_accounts","google_news_accounts","wechat_accounts","hootsuite_accounts","public_post_accounts","slack_accounts","spark_accounts"],findLoadingState:function(a){if("undefined"!=typeof HM.bootstrap&&"undefined"!=typeof HM.bootstrap.profile&&"undefined"!=typeof HM.bootstrap.profile.facebook_accounts){for(var b=!1,c=!0,d=!0,e=0;e<this.accountNames.length;e++){var f=this.accountNames[e];if("undefined"!=typeof HM.bootstrap.profile[f])for(var g=0;g<HM.bootstrap.profile[f].length;g++){c=!1;var h=HM.bootstrap.profile[f][g].last_crawled;"undefined"!=typeof h&&0===parseInt(h,10)&&(b=!0),HM.bootstrap.profile[f][g].is_ugc||(d=!1)}}if(a){var i=a.where({social_id:"custom"}).length>0;i&&(c=!1)}return{noAccounts:c,stillLoading:b,hasOnlyUgc:HM.enabled&&HM.enabled.privateUgc&&d}}return{noAccounts:!0,stillLoading:!1}},getConnectedHashtags:function(){var a=[];if("undefined"!=typeof HM.bootstrap&&"undefined"!=typeof HM.bootstrap.profile&&"undefined"!=typeof HM.bootstrap.profile.facebook_accounts)for(var b=0;b<this.accountNames.length;b++){var c=this.accountNames[b];if("undefined"!=typeof HM.bootstrap.profile[c])for(var d=0;d<HM.bootstrap.profile[c].length;d++)if(HM.bootstrap.profile[c][d].hashtag||1===HM.bootstrap.profile[c][d].types){var e=HM.bootstrap.profile[c][d].label;e="#"===e[0]?e:"#"+e,a.push(e)}}return _.uniq(a)},loadCtaMetaData:function(a,b){if(!b.hasOwnProperty("cta")||_.isEmpty(b.cta))if(""!==a.embed_display_profile||a.embed_display_profile!==!1){try{cta=JSON.parse(a.embed_display_profile).cta}catch(c){}if("undefined"==typeof cta||_.isEmpty(cta))return b.cta_display="none",b;if(!cta.feeds||-1===cta.feeds.indexOf(""+b.social_feed_id))return b.cta_display="none",b;b.cta_url=cta.url,b.cta_text=cta.text,b.cta_color=cta.color,b.cta_icon=cta.icon,b.cta_display="inherit",b.cta_text_color=cta.text_color}else b.cta_display="none";else if(_.isEmpty(b.cta))b.cta_display="none";else try{cta=JSON.parse(b.cta),"undefined"!=typeof cta.url?(b.cta_url=cta.url,b.cta_text=cta.text,b.cta_color=cta.color,b.cta_icon=cta.icon,b.cta_display="inherit",b.cta_text_color=cta.text_color):b.cta_display="none"}catch(c){console.log("CTA was malformed.")}return b},isDoubleByte:function(a){for(var b=0,c=a.length;c>b;b++)if(a.charCodeAt(b)>255)return!0;return!1},renderHypeMessage:function(b,c){var d=this.el;"undefined"==typeof d&&(d=a("#hypeHolderInner"));var e="";"undefined"!=typeof c&&"undefined"!=typeof c.style&&(e='style="'+c.style+'"'),a(d).html('<div class="dropShadow post-loading" '+e+" >"+b+"</div>");var f=300,g=a(".post-loading").outerWidth();a(".post-loading").css({position:"fixed",left:/\/edit/.test(window.location.href)?(a(window).width()-f-g)/2+f:(a(window).width()-g)/2,top:"70px",display:HM.hypeHelper.isEditorViewer()?"none":""})},currentThemeIsAutoPopup:function(){var a="undefined"!=typeof HM.bootstrap&&"undefined"!=typeof HM.bootstrap.profile?HM.bootstrap.profile.theme:null;if("hypeTemplate_waterfall_events"===a||"hypeTemplate_mosaic"===a)return!0;var b=a?HM.Themes.info(a):null,c=HM.getUser().user.settings();return b&&c&&b.supports_waterfall&&c.get("waterfallToggle")&&c.get("highlightPostsToggle")?!0:!1},renderSinglePostOverlay:function(a,b,c){var d=b.indexOf(a),e=HM.hypeHelper.isEmbed(),f=HM.hypeHelper.currentThemeIsAutoPopup(),g=b.toJSON(),h=HM.bootstrap.profile;return h.hideControls=f,e&&!f?void HM.CompatiblePostMessage.trigger(window.parent,"showPopupModal",{index:d,posts:g,profile:h}):void HM.PostModalManager.show(d,g,h)},goToCTA:function(b){url=a(b.currentTarget).find("span")[0].getAttribute("data-url");var c=a(b.currentTarget).parents(".post").eq(0).attr("data-postid"),d=this.model.where({post_id:c})[0].get("social_id");analytics.track("CTA Clickthrough",{post_id:c,tint:HM.bootstrap.profile.user_name,tint_id:HM.bootstrap.profile.user_id,feed_id:d}),window.open(url,"_blank")},trackClick:function(b){var c=this,d=b.currentTarget,e=(a(d).attr("href"),a(b.currentTarget).parents(".post").eq(0).attr("data-postid")),f=this.model.where({post_id:e})[0].get("social_id");hmAnalytics.track("Post Clickthrough",{post_id:a(b.currentTarget).parents(".post").eq(0).attr("data-postid"),tint:HM.bootstrap.profile.user_name,feed_id:f,tint_id:HM.bootstrap.profile.id});var g,h,i=c.model.where({post_id:a(d).closest(".post-holder").data("id")})[0],j=document.createElement("video");j.canPlayType?(g=""!==j.canPlayType('video/mp4; codecs="mp4v.20.8"'),h=""!==(j.canPlayType('video/mp4; codecs="avc1.42E01E"')||j.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))):(g=!1,h=!1);var k="newtab"!==i.get("popup_function"),l=!/facebook.com/.test(HM.referer),m="undefined"==typeof Wix,n=!a(".single-post.overlay").length,o=!HM.isMobile,p=!HM.noPopup;return o&&l&&m&&n&&p&&k?(a("html").is(".ie8")?window.open(i.get("modified_url"),"_blank"):HM.hypeHelper.renderSinglePostOverlay.call(c,i,c.model,HM.bootstrap.profile),!1):HM.getParameter("nolinkredir",window.location.href)&&"true"===HM.getParameter("nolinkredir",window.location.href)?!1:!0},resizeForBanner:function(a,b){return HM.hypeHelper.resizeForBannerSettings(a.settings(),b)},iFrameRenderBanner:function(b,c){var d=b.getIfSupported("banner");if(d&&d.url){var e=a(window.parent),f=e.width()*b.bannerAspectRatio(),g=e.height()-f;window.frameElement&&a(window.frameElement.parentElement).css({position:"fixed","margin-top":0,height:g,top:f,left:0,right:0}),HM.TemplateManager.get("bannerTemplate",function(c){var d=a.extend({},b.attributes,{hgt:f+"px"}),e=Mustache.render(c,d);a(window.parent.document).find("#banner").html(e)})}else window.frameElement&&(a(window.frameElement.parentElement).css({position:"fixed","margin-top":0,height:"100%",top:0,left:0,right:0}),a(window.parent.document).find("#banner").empty())},resizeForBannerSettings:function(b,c){c=c||{};var d=HM.hypeHelper.shouldRunThemeInIFrame(HM.Themes.info(b.get("theme")))&&!/\/moderate/.test(window.location.href);if(HM.getParameter("innerFrame"))HM.hypeHelper.iFrameRenderBanner(b,c);else if(d)a(c.el).css({position:"fixed","margin-top":0,top:"54px",height:a(window).height()-54,left:HM.ProfileEditPanelView.WIDTH,right:0,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAKElEQVQYV2O8e/fufwY0oKSkhC7EwDgUFP7//x/DM/fu3cP0zBBQCAC7zDTlPG9KKgAAAABJRU5ErkJggg==) repeat"});else{var e=new HM.TintLayout(b),f=e.viewport(),g=e.themeTop();"boolean"==typeof c.noModifyHeight&&c.noModifyHeight?a(c.el).css({position:"relative","margin-top":g,top:"",left:"",right:"",background:""}):a(c.el).css({position:"fixed","margin-top":0,height:e.themeHeight(),top:g,left:f.left(),right:f.right(),background:""})}return b.hasBanner()},animation:{addPost:function(){a(".hypeHelper_animation").remove(),a("body").append(a("<div>").addClass("hypeHelper_animation animated hypeHelper_animation_addPost fadeInDown").html('<i class="fa fa-download"></i>')),window.setTimeout(function(){a(".hypeHelper_animation").removeClass("fadeInDown").addClass("fadeOutDown"),window.setTimeout(function(){a(".hypeHelper_animation").remove()},1e3)},1500)},poll:function(){a(".hypeHelper_animation").remove(),a("body").append(a("<div>").addClass("hypeHelper_animation animated hypeHelper_animation_poll bounceIn").html('<i class="fa fa-spin fa-repeat"></i>')),window.setTimeout(function(){a(".hypeHelper_animation").removeClass("bounceIn").addClass("bounceOut"),window.setTimeout(function(){a(".hypeHelper_animation").remove()},1e3)},1500)},resetProgressBar:function(a){console.log("resetProgressBar "+a)}},parseDisplayProfileForLayout:function(a){var b={hypeTemplate:{mw:280,p:20},hypeTemplate_v2:{mw:280,p:25},hypeTemplate_photo_tall:{mw:280,p:20},hypeTemplate_photo_large:{mw:340,p:20},hypeTemplate_photo:{mw:340,p:20},hypeTemplate_news:{mw:280,p:2},hypeTemplate_pin:{mw:222,p:16},hypeTemplate_inverse:{mw:250,p:10},hypeTemplate_tano:{mw:280,p:20},hypeTemplate_waterfall:{mw:250,p:10},hypeTemplate_waterfall_events:{mw:250,p:10},hypeTemplate_modern:{mw:200,p:15}},c=a.embedDisplayProfile(),d=a.get("theme");HM.hypeHelper.onModerate()?this.minimumWidth=280:/string|number/.test(typeof c.postwidth)?this.minimumWidth=parseInt(c.postwidth,10):b[d]&&(this.minimumWidth=b[d].mw),HM.hypeHelper.onModerate()?this.padding=20:/string|number/.test(typeof c.postpadding)?this.padding=parseInt(c.postpadding,10):b[d]&&(this.padding=b[d].p)},getDisplayProfile:function(b){var c={postwidth:void 0,postpadding:void 0,sliderwidth:void 0,sliderpadding:void 0,slidertextconfig:void 0,banner:void 0,transitionDelay:void 0,animationIndex:void 0,waterfallSpeed:void 0,gridwidth:void 0,gridheight:void 0,gridpadding:void 0,fontcolor_post:void 0};try{profileMeta=JSON.parse(b)}catch(d){console.log("hypeHelper.getDisplayProfile(): Invalid profile meta, so reconfiguring"),profileMeta={}}return a.extend(c,profileMeta)},shouldRenderBanner:function(a){var b=HM.hypeHelper.shouldRunThemeInIFrame(HM.Themes.info(a.get("theme")));return!b&&!HM.getParameter("innerFrame")&&a.hasBanner()&&"hypeTemplate_advertisingUnit"!==a.get("theme")&&!/\/edit\/moderate/.test(window.location.href)},initializeModalInterval:function(b){console.log("initializeModalInterval");var c=this;this.cursor||(this.cursor=HM.PostCursor(this.model));var d=function(){a("#"+HM.PostModalManager.FRAME_ID).is(":visible")?HM.PostModalManager.hide():HM.hypeHelper.renderSinglePostOverlay(c.cursor.nextPost(),c.model,HM.bootstrap.profile)};this.modalInterval&&window.clearInterval(this.modalInterval),this.transitionDelay&&(this.modalInterval=window.setInterval(d,c.transitionDelay)),"undefined"!=typeof b&&b===!0&&d()},setupExpiredTrialPlanModal:function(b){function c(){var c=HM.enabled.trial_extended?!1:!0,d="";c&&(d=' or <button class="plan-modal-alert-extend tnt-btn tnt-btn-1">Extend Trial</button>'),a(HM).trigger("alert",{type:"info",message:'No new data coming in! Your trial has ended. <button class="plan-modal-alert-choose tnt-btn tnt-btn-1">Choose Plan</button>'+d,autoFade:!1,position:"relative",behindModal:!0}),a(".plan-modal-alert-choose").unbind("click").bind("click",function(){modalView=new HM.PlanModalView({extend:c}),modalView.render()}),a(".plan-modal-alert-extend").unbind("click").bind("click",function(){c&&(modalView=new HM.PlanModalView({extend:c,type:"extend"}),modalView.render())}),b.unbind("click").bind("click",function(){return modalView=new HM.PlanModalView({extend:c}),modalView.render(),!1})}b.addClass("disabled"),b.unbind().bind("click",function(){return!1}),"undefined"==typeof HM.PlanModalView?a.getScript("/public/js/modules/planModal.js").done(function(){c()}).fail(function(a,b,c){console.log(c)}):c()},sendNotification:function(b){HM.pusher&&(b.sender_session_id=HM.pusher.sessionID,a.ajax({url:HM.apiBaseUrl+"send_notification",data:{user_id:HM.bootstrap.profile.user_id,t_s:HM.t_s,data:b},dataType:"jsonp"}))},listenForNotifications:function(){"undefined"==typeof HM.pusher&&(HM.pusher=new Pusher(HM.p_k));var b=""+HM.bootstrap.profile.user_id;if("undefined"==typeof HM.pusher.channel(b)){var c=HM.pusher.subscribe(b);c.bind("push_notification",function(b){if(console.log("Pusher notification"),!("undefined"!=typeof b.sender_session_id&&""+HM.pusher.sessionID==""+b.sender_session_id||/\/edit\/moderate/.test(window.location.href)||/\/w_moderate/.test(window.location.href))){var c={new_feed:["router_renderPosts","editor_feedLoaded","lift_onb_curtain"],new_feed_no_posts:["editor_feedLoaded"],new_posts:["hype_poll","lift_onb_curtain"],approved_post:["hype-approve"],rejected_post:["hype-reject"],deleted_post:["hype-reject"],display_post:["hype-display"]},d=c[b.action];d||(d=[b.action]),d&&_.each(d,function(c){console.log("trigger",c,b),"router_renderPosts"===c&&(HM.bootstrap.hypes=void 0),a(HM).trigger(c,b)})}})}},refreshSession:function(b){a.get("/auth/refresh_session").done(function(c){a.getScript("/phptojavascript.js").done(function(a){b&&b()})})},initializeTags:function(a,b){a.tagit({availableTags:b,removeConfirmation:!0,placeholderText:"enter Tags",preprocessTag:function(a){return a?(a=a.replace(/\+/g,""),"+"+a):""}})},template:function(){return HM.hypeHelper.onModerate()?"hypeTemplate_edit":/\/moderate/.test(window.location.href)?"hypeTemplate":HM.bootstrap.profile.theme&&/hypeTemplate_waterfall/.test(HM.bootstrap.profile.theme)||/hypeTemplate_waterfall/.test(HM.themeOverride)?"hypeTemplate_inverse":HM.themeOverride?HM.themeOverride:HM.bootstrap.profile.theme&&-1!==HM.bootstrap.profile.theme.indexOf("hypeTemplate")?HM.bootstrap.profile.theme:void 0},onModerate:function(){return/\/edit\/moderate/.test(window.location.href)||/w_moderate/.test(window.location.href)||/w_edit/.test(window.location.href)||/w_moderate_all/.test(window.location.href)},setDefaultTimeZone:function(b){Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())};var c=new Date,d=c.stdTimezoneOffset(),e=d>0?"-":"";d=Math.abs(d),d=(d/60).toFixed(2),a(b+' option[data-offset="'+e+d+'"]').attr("selected","selected")},convertDateToMoment:function(a,b,c,d,e,f,g){function h(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}var i=d;!e&&12>d&&(i=d+12),e&&12==d&&(i=d-12);var j=h(a,4)+"-"+h(b,2)+"-"+h(c,2)+"T"+h(i,2)+":"+h(f,2)+g;return moment(j)},setDateTime:function(a){var b="."+a+"-inputs ",c=this.modal.find(b+".date").val().split("/"),d=parseInt(this.modal.find(b+".hour").val(),10),e=parseInt(this.modal.find(b+".minutes").val(),10),f="am"===this.modal.find(b+".am-pm").val(),g=this.modal.find(".time-zone").val().replace(":","");return HM.hypeHelper.convertDateToMoment(parseInt(c[2],10),parseInt(c[0],10),parseInt(c[1],10),d,f,e,g)},areValidDates:function(b){return this.startTime.isValid()?this.startTime.isBefore(moment().zone(this.modal.find(".time-zone").val()).startOf("day"))&&(""!==this.modal.find(".start-date").val()||b)?(this.modal.find(".start-inputs").addClass("error"),a(HM).trigger("alert",["error","Start time cannot be in the past"]),!1):(this.modal.find(".start-inputs").removeClass("error"),this.endTime.isValid()||""===this.modal.find(".end-date").val()&&!b?this.endTime.isBefore(moment())&&(""!==this.modal.find(".end-date").val()||b)?(this.modal.find(".end-inputs").addClass("error"),a(HM).trigger("alert",["error","End time cannot be in the past"]),!1):(this.modal.find(".end-inputs").removeClass("error"),this.startTime.isValid()&&this.endTime.isValid()&&this.endTime.isBefore(this.startTime)?(this.modal.find(".end-inputs").addClass("error"),a(HM).trigger("alert",["error","The end time cannot be before the start time"]),!1):this.startTime.isValid()&&this.endTime.isValid()&&this.endTime.isSame(this.startTime)?(this.modal.find(".end-inputs").addClass("error"),a(HM).trigger("alert",["error","The end time cannot be the same as the start time"]),!1):this.endTime.isValid()?(a(HM).trigger("hide.alert"),!0):(a(HM).trigger("hide.alert"),!1)):(this.modal.find(".end-inputs").addClass("error"),a(HM).trigger("alert",["error","Invalid end date"]),!1)):(this.modal.find(".start-inputs").addClass("error"),a(HM).trigger("alert",["error","Invalid start date"]),!1)},eventAlert:function(b,c){var d={type:b,message:c+"<span id='event-countdown'></span>",position:"relative",autoFade:!1,solo:!0,behindModal:!0};/\/edit/.test(window.location.href)&&(d.parent="#hypeHolder"),a(HM).trigger("alert",d)},scheduledEventAlert:function(b,c,d){var e=this;this.eventAlert("info",c+" starting in:"),b.test&&(d=0),a("#event-countdown").countdown(1e3*(b.start-d),function(b){a(this).html(b.strftime(e.countdownFormat))}).on("finish.countdown",function(){e.duringEventAlert(b,c,d)})},duringEventAlert:function(b,c,d){var e=this;b.test&&(d=0,c="InsTINT Updates Test"),this.eventAlert("success",c+" ending in:"),setTimeout(function(){a("#event-countdown").countdown(1e3*(b.stop+d),function(b){a(this).html(b.strftime(e.countdownFormat))}).on("finish.countdown",function(){e.endEventAlert(c)})},500)},endEventAlert:function(a){var b="InsTINT Updates"===a?"are":"is";this.eventAlert("info","Your "+a+" "+b+" over")},testInstintUpdates:function(b,c){a.post(HM.apiBaseUrl+"instint_update",{user_id:c,test:!0},null,"json").done(function(c){c.success?(a(HM).trigger("alert",["success","insTINT Updates Test Started."]),b.model.fetch({reset:!0})):a(HM).trigger("alert",["error","Sorry, there was a problem starting the insTINT Updates test."])}).fail(function(){a(HM).trigger("alert",["error","Sorry, there was a problem starting the insTINT Updates test."])})},countdownFormat:' <span class="num">%D</span> <span class="unit">days</span>                         <span class="num">%H</span> <span class="unit">hours</span>                         <span class="num">%M</span> <span class="unit">minutes</span>                         <span class="num">%S</span> <span class="unit">seconds</span>',renderProfileAndPostsAndCollections:function(){HM.hypeHelper.clearPosts(),HM.bootstrap.hypes=void 0,window.setTimeout(function(){a(HM).trigger("router_renderPosts"),a(HM).trigger("router_renderProfileAndCollections")},0)},clearPosts:function(){a(HM).trigger("router_removeTheme")},castToChromecast:function(b){function c(){HM.chromecast.init({callback:function(){new HM.SelectPersonalizationChromecastModalView({model:b}).render()}})}"undefined"==typeof HM.chromecast?a.getScript("/public/js/modules/chromecast.js").done(function(){c()}).fail(function(){console.log("chromecast initialization failed")}):c()},renderInstintUpdates:function(b){a.when(a.getScript("https://js.stripe.com/v1/"),a.getScript("https://checkout.stripe.com/v2/checkout.js")).done(function(){a.getScript("/public/js/modules/realtimeDatePicker.js").done(function(){var a=new HM.RealtimeDatePickerView({tint:b.get("user_id"),tints:new HM.Users([b]),parentModel:b});a.render()}).fail(function(a,b,c){console.log(c)})})},renderPlanUpgradeModal:function(b){"undefined"!=typeof Wix?a("#personalize-upgrade-prompt").modal("show"):("string"==typeof b&&hmAnalytics.track("Upgrade: Click",{location:b}),HM.PlanModalView?(new HM.PlanModalView).render():a.getScript("/public/js/modules/planModal.js").done(function(){(new HM.PlanModalView).render()}))},hideThemeLoadingIndicator:function(){a("#hypeHolderLoading").css("display","none")},showThemeLoadingIndicator:function(){a("#hypeHolderLoading").css("display","block")},isBootstrapped:function(a){return HM.bootstrap.stale?(console.log("Can't bootstrap, stale filters!"),!1):!!(HM.bootstrap&&HM.bootstrap.profile&&HM.bootstrap.hypes&&(HM.bootstrap.hypes.data||HM.bootstrap.hypes).length)},clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},getLocationHref:function(){return location.href},shouldRunThemeInIFrame:function(a){return HM.isThemeRunner?!/\/innerFrame/.test(HM.hypeHelper.getLocationHref())&&a.runs_in_iframe:/\/edit/.test(HM.hypeHelper.getLocationHref())&&a.runs_in_iframe},sendEventToIFrame:function(a,b){var c=window.document.getElementById("outerFrame"),d=null,e=null;if(c){var f=c.contentWindow.document.getElementById("innerFrame");f&&(d=f.contentWindow.$,e=d(f.contentWindow.document).find("body"))}e&&e.trigger.apply(e,arguments)},sendNotificationOrDispatchToIFrame:function(a){HM.isThemeRunner?HM.hypeHelper.sendEventToIFrame("iframe-notification",a):HM.hypeHelper.sendNotification(a)},toggleFullScreen:function(a){a=a||document,a.fullScreenElement&&null!==a.fullScreenElement||!a.mozFullScreen&&!a.webkitIsFullScreen?a.documentElement.requestFullScreen?a.documentElement.requestFullScreen():a.documentElement.mozRequestFullScreen?a.documentElement.mozRequestFullScreen():a.documentElement.webkitRequestFullScreen&&a.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.cancelFullScreen?a.cancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()}};HM.hypeHelper=_.extend(HM.hypeHelper,b)}($);var $t71n7=$t71n7||$;!function(a){HM.yt={id:0,init:function(){if(!this.requested){var b=document.createElement("script");b.src="//www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),this.ready=a.Deferred(),this.requested=!0}},api_ready:function(){this.ready||(this.ready=a.Deferred(),this.requested=!0),this.ready.resolveWith(this)}},HM.yt.Embed=function(a,b){this.element_id=a;HM.yt.init(),this.options=b||{},this.makePlayerObj()},HM.yt.Embed.prototype={makePlayerObj:function(b){if(!document.getElementById(this.element_id))return void setTimeout(this.makePlayerObj.bind(this),250);var c=this;HM.yt.ready.then(function(){var b=a.extend(!0,{events:{onStateChange:function(a){console.log("yt state change:",a.data),a.data==YT.PlayerState.ENDED&&(c.videoEnded(),c.player.destroy(),delete c.player)},onReady:function(){c.videoReady()}}},c.options);c.player=new YT.Player(c.element_id,b)})},videoEnded:function(){
this.options.onEnd&&this.options.onEnd()},videoReady:function(){this.options.mute&&this.player.mute(),this.options.onReady&&this.options.onReady()}}}($t71n7),window.onYouTubeIframeAPIReady?(window.conflictingOnYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=function(){HM.yt.api_ready(),window.conflictingOnYouTubeIframeAPIReady()}):window.onYouTubeIframeAPIReady=function(){HM.yt.api_ready()};var $t71n7=$t71n7||$;if(function(a){function b(){var a,b="facebook-jssdk",c=document.getElementsByTagName("script")[0];document.getElementById(b)||(a=document.createElement("script"),a.id=b,a.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5",c.parentNode.insertBefore(a,c))}function c(){e.resolve(),d=!0,FB.XFBML.parse()}var d=!1,e=a.Deferred();window.fbAsyncInit?(window.conflictingfbAsyncInit=window.conflictingfbAsyncInit,window.fbAsyncInit=function(){c(),window.conflictingfbAsyncInit()}):window.fbAsyncInit=function(){c()},HM.fb=function(c,f){var g=_.uniqueId("HM.fb");return d||(b(),d=!0),e.then(function(){setTimeout(function(){FB.XFBML.parse()},1),FB.Event.subscribe("xfbml.ready",function(a){if("video"===a.type&&a.id==g){var b=a.instance;b[f.autoplay?"play":"pause"](),b[f.muteVideo?"mute":"unmute"](),b.subscribe("finishedPlaying",function(a){"function"==typeof f.callback&&f.callback()})}})}),a("<div/>",{"class":"fb-video","data-href":c,"data-allowfullscreen":!0,id:g})[0].outerHTML}}($t71n7),"object"!=typeof HM?HM={hypeHelper:{}}:"object"==typeof HM&&"object"!=typeof HM.hypeHelper&&(HM.hypeHelper={}),"undefined"==typeof _t71n7)var _t71n7=_;if(function(a){HM.hypeHelper=_t71n7.extend(HM.hypeHelper,{isEmbed:function(){return HM.getParameter("innerFrame")?!HM.hypeHelper.isEditorViewer()&&!!self.parent.frameElement:top!==self},isEditorViewer:function(){var a=new RegExp(HM.bootstrap.profile.user_name+"/edit","i");if(HM.getParameter("innerFrame"))try{return a.test(top.location.href)}catch(b){}return!1}})}($),"object"!=typeof HM?HM={hypeHelper:{}}:"object"==typeof HM&&"object"!=typeof HM.hypeHelper&&(HM.hypeHelper={}),"undefined"==typeof _t71n7)var _t71n7=_;!function(a){HM.hypeHelper=_t71n7.extend(HM.hypeHelper,{generateEmbed:function(b,c){function d(a){var b=!1;try{b=JSON.parse(e.embed)}catch(c){}return b}var e=b;"function"==typeof b.toJSON&&(e=b.toJSON()),c=c||{autoplay:!0};var f=/youtube.com\/watch\?.*v=([a-z0-9A-Z_\-]+)|youtu.be\/([a-z0-9A-Z_\-]+)/g,g=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,h=f.exec(e.url),i=g.exec(e.url),j="",k=d(e.embed),l=!/CrKey/.test(window.navigator.userAgent),m=!!h,n=!!i,o=/\/\/vine\.co\/v/.test(e.url),p=k&&/\.mp4/.test(k.html),q=k&&/filepicker\.io/.test(k.html),r=k&&k.video_data,s=e.source==HM.Hype.SOURCES.FACEBOOK&&(/\/videos\//.test(e.url)||/facebook\.com\/video\.php\?id=/.test(e.url));if(m){var t=h[1]||h[2],u="yt_"+t,v=c.autoplay?"1":"0";j='                    <iframe                     id="'+u+'"                     title="YouTube video player"                     class="youtube-player"                     type="text/html"                     width="100%"                     height="350"                     src="https://www.youtube.com/embed/'+t+"?enablejsapi=1&autoplay="+v+'&rel=0"                     frameborder="0" allowFullScreen>                    </iframe>';new HM.yt.Embed(u,{onEnd:c.makeVideoEndCallback&&c.makeVideoEndCallback(),mute:!!c.muteVideo});return j}if(n){var w=i[i.length-1],v=c.autoplay?"1":"0",u="vim_"+w;j='                    <iframe                     id="'+u+'"                     src="https://player.vimeo.com/video/'+w+'?autoplay=1&loop=1"                     width="100%"                     height="350"                     frameborder="0"                     webkitallowfullscreen                     mozallowfullscreen                     allowfullscreen>                    </iframe>                    ';var x=(c.makeVideoEndCallback?c.makeVideoEndCallback():function(){},!!c.muteVideo);return a(window).on("message",function(b){if("https://player.vimeo.com"===b.origin){var c=JSON.parse(b.originalEvent.data||"{}");if(console.log("vimeo postMessage:",b,c),"finish"==c.event)finishFunc(),a(window).off("message",handleMessage);else if("ready"==c.event){var d=document.getElementById(u).contentWindow,e=JSON.stringify({method:"addEventListener",value:"finish"});d.postMessage(e,"*"),x&&(e=JSON.stringify({method:"setVolume",value:0}),d.postMessage(e,"*"))}}}),j}if(o){var y=/vine\.co\/v\/.+/.exec(e.url)[0].split("?")[0].split("/")[2],z=c.muteVideo?0:1;return j='<iframe src="https://vine.co/v/'+y+"/card?audio="+z+'" width="100%" height="520" frameborder="0"></iframe>'}if(r&&l)return HM.hypeHelper.generateVideoTag(k.video_data.url,c,e);if(q&&l)return j=HM.hypeHelper.generateVideoTag(k.html,c,e);if(p&&l){var A;return"undefined"!=typeof k.object?A=k.object.html:"undefined"!==k.html&&(A=k.html),j=HM.hypeHelper.generateVideoTag(A,c,e)}if(s){var B=c.makeVideoEndCallback&&c.makeVideoEndCallback();return HM.fb(e.url,{callback:B,autoplay:c.autoplay,muteVideo:c.muteVideo})}return!1},generateVideoTag:function(a,b,c){var d="v_"+c.post_id;if(b.makeVideoEndCallback){var e=b.makeVideoEndCallback();document.addEventListener("ended",function(a){a.target.id==d&&e()},!0)}var f="controls ";return b.autoplay&&(f+="autoplay "),b.muteVideo&&(f+="muted "),'<video id="'+d+'" width="100%" height="530" '+f+'>              <source src="'+a+'" type="video/mp4">            </video>'}})}("undefined"!=typeof $t71n7?$t71n7:$),HM.Hype=Backbone.Model.extend({defaults:{brand_id:"",brand_name:"",brand_image:"",user_id:"",url:"",title:"",user_name:"",name:"",profile_picture:"",timestamp:"",linkid:"",post_id:"",likes:"[]",description:"",image:"",color:"",collection_name:"",collection_id:"",acct_name:"",acct_url:"",acct_username:"",acct_image:"//d33w9bm0n1egwm.cloudfront.net/assets/analytics/EmptyProfile.png",user_rights:{}},url:function(){var a=HM.getParameter("wl_token",window.location.href);return a?"/api/post/"+this.get("post_id")+"?wl_token="+a:"undefined"==typeof this.get("post_id")?"/api/post":"/api/post/"+this.get("post_id")},numericId:function(){return this.get("post_id")?this.get("post_id").replace("user_",""):void 0},authorObject:function(){return this.parsedAuthor=this.parsedAuthor||$.parseJSON(this.get("author")),this.parsedAuthor||{}},newlyApprovedCreated:function(){return 9*Math.floor(Date.now()/1e3)},isRecurring:function(){return"undefined"!=typeof this.get("recur_frequency")&&""!==this.get("recur_frequency")&&0!==this.get("recur_frequency")&&"0"!==this.get("recur_frequency")},idAttribute:"uniqueId",validate:function(a){},manipulateData:function(a){function b(a,b){function c(a,c,d){if(0!==c&&!/\s/.test(d[c-1])||/#/.test(d[c+a.length]))return a;var e=a.substring(1),f='</a><a class="twitter-hashtag external-link" href="https://twitter.com/hashtag/'+e+'" target="_blank">'+a+'</a><a href="'+b+'" class="heading urlLink" target="_blank">';return f}var d=String(a),e=/#[\w\u00C0-\u017F]+/g;return d.replace(e,c)}function c(a,b){function c(a,c,d){var e=a.substring(1),f='</a><a class="twitter-account external-link" href="https://twitter.com/'+e+'" target="_blank">'+a+'</a><a href="'+b+'" class="heading urlLink" target="_blank">';return f}var d=String(a),e=/\B@\w{1,15}/g;return d.replace(e,c)}function d(b,c){function d(a,b,c){var d='</a><a class="twitter-link external-link" href="'+c+'" target="_blank">'+a+'&hellip;</a><a href="'+b+'" class="heading urlLink" target="_blank">';return d}var e=String(b),f=a.get("tweet_urls");return _.each(f,function(b){e=e.replace(b.display_url,d(b.display_url,a.get("modified_url"),b.url))}),e}"undefined"==typeof a&&(a=this),"undefined"!=typeof a.get("post_id")&&""!==a.get("post_id")&&a.set("uniqueId",a.get("post_id")+"_"+a.get("offset")+"_"+a.get("created"),{silent:!0}),"object"==typeof HM.bootstrap&&"object"==typeof HM.bootstrap.profile&&(/premium/.test(HM.bootstrap.profile.plan)||/trial/.test(HM.bootstrap.profile.plan))&&a.set("image",a.get("image").replace("/tint/","/dqbgcaq7z/"),{silent:!0});var e=a.get("image");"true"===a.get("highlight")?a.set("image",HM.Cloudinary.replace(e,{width:600}),{silent:!0}):a.set("image",HM.Cloudinary.replace(e,{width:300}),{silent:!0});var f=a.get("url");f&&(/http/.test(a.get("url"))||(f="http://"+a.get("url")),2===parseInt(a.get("source"),10)&&(f="https://twitter.com/x/status/"+a.get("social_post_id")),a.set("modified_url",f,{silent:!0}));var g=a.get("title").replace(/&amp;/gi,"&");2===parseInt(a.get("source"),10)&&(g=b(g,f),g=c(g,f),g=d(g,f)),"undefined"!=typeof emojione&&(g=emojione.unicodeToImage(g)),parseInt(a.get("source"),10)===HM.Hype.SOURCES.INSTAGRAM&&(g=g.replace(/(#[^\s#]+?(?=#[^\s]+?))/g,"$1 ")),g=a.addConnectedHashtagSpans(g),a.set("modified_title",g,{silent:!0});var h=HM.getWindow?HM.getWindow():window;if("https:"!==h.location.protocol||/facebook/.test(HM.referer)||a.set("image",a.get("image").replace(/^http:\/\//,"https://"),{silent:!0}),("0"===a.get("timestamp")||0===a.get("timestamp"))&&a.set("timestamp",Math.floor((new Date).getTime()/1e3),{silent:!0}),parseInt(a.get("timestamp"),10)>(new Date).getTime()/1e3&&a.set("timestamp",Math.floor(parseInt(a.get("timestamp"),10)/10),{silent:!0}),a.get("author"))try{var i=a.get("author");i.constructor==="string".constructor&&(i=JSON.parse(a.get("author"))),7===a.get("source")&&(i.username=""),a.set("author",JSON.stringify(i),{silent:!0})}catch(j){console.log("err in hype.js:85"),console.log(j)}"true"===HM.getParameter("noimages",window.location.href)&&a.set("image","",{silent:!0}),a.get("post_id")||a.set("post_id",a.get("id"),{silent:!0}),"true"===HM.getParameter("noimagescaling",window.location.href)&&a.set("image",HM.Cloudinary(a.get("image")),{silent:!0});var k=!1,l=new Date;if(a.get("created")){var m=a.get("created"),n=new Date,o=86400;1e3*(parseInt(m,10)-o)>n.getTime()&&(k=!0,m=Math.round(parseInt(m,10)/10)),n.setTime(m+"000");var p=new Date;n.getTime()>p.getTime()&&(n=p),l=n,timeago=$.timeago(n)}a.set("isotimestamp",l.toISOString(),{silent:!0}),a.set("timeago",$.timeago(l)),a.set("sticky",k)},initialize:function(){var a=this;this.on("change",function(b){a.manipulateData(b)}),this.manipulateData(this)},addConnectedHashtagSpans:function(a){var b=HM.hypeHelper.getConnectedHashtags();return _(b).each(function(b){var c=new RegExp("(^|[\\s>])("+escapeRegExp(b)+")(?=[\\s<]|$)","i");a=a.replace(c,'$1<span class="connected-hashtag">$2</span>')}),a},isCustomPost:function(){return this.get("source")===HM.Hype.SOURCES.CUSTOM},author:function(){try{var a=JSON.parse(this.get("author"));if(res={},a&&a.name){var b=a.name,c=b.length>16?b.substring(0,16)+"":b,d=a.username?"@"+a.username:"",e=d.length>16?d.substring(0,16)+"":d,f=""!==a.picture?a.picture:this.get("acct_image");return"https:"===window.location.protocol&&(f=f.replace(/^http:\/\//,"https://")),this.get("source")===HM.Hype.SOURCES.TWITTER&&(b=a.fullname?a.fullname:a.name,c=a.name,e=d),{acct_name:c,acct_name_full:b,acct_url:this.get("source")===HM.Hype.SOURCES.TWITTER?"http://www.twitter.com/"+a.username:a.link,acct_image:f,acct_username:e,acct_username_full:d}}return!1}catch(g){return!1}},toJSON:function(){var a=Backbone.Model.prototype.toJSON.call(this);return $.extend(a,this.author()),$.extend(a,{text_only:!a.image}),_(HM.Hype.SOURCES).each(function(b,c){a["is_"+c.toLowerCase()]=a.source==b,a.source==b&&(a.source_network=c.toLowerCase())}),a.timeago=$.timeago(a.isotimestamp),a},nextRelativeOffset:function(){return relativeOffset=this.get("relative_offset"),relativeOffset+1}},{SOURCES:{FACEBOOK:1,TWITTER:2,INSTAGRAM:3,YOUTUBE:4,PINTEREST:5,RSS:6,GOOGLEPLUS:7,LINKEDIN:8,VINE:9,TUMBLR:10,CUSTOM:11,FLICKR:12,GOOGLE_NEWS:13,WECHAT:14,PUBLIC_POST:16,SLACK:17,SPARK:18},SOURCE_ACCOUNTS:{1:{network:"facebook",account:HM.FacebookAccount},2:{network:"twitter",account:HM.TwitterAccount},3:{network:"instagram",account:HM.InstagramAccount},4:{network:"youtube",account:HM.YoutubeAccount},5:{network:"pinterest",account:HM.PinterestAccount},6:{network:"rss",account:HM.RSSAccount},7:{network:"googleplus",account:HM.GooglePlusAccount},8:{network:"linkedin",account:HM.LinkedinAccount},9:{network:"vine",account:HM.VineAccount},10:{network:"tumblr",account:HM.TumblrAccount},11:{network:"custom"},12:{network:"flickr",account:HM.FlickrAccount},13:{network:"google_news",account:HM.GoogleNewsAccount},14:{network:"wechat",account:HM.WechatAccount},16:{network:"public_post",account:HM.PublicPostAccount},17:{network:"slack",account:HM.SlackAccount},18:{network:"spark",account:HM.SparkAccount}},VISIBILITY:{DELETED:-2,PRIVATE:0,PUBLIC:1,RECURRING:2}}),HM.SliderHypeCollection=Backbone.Collection.extend({model:HM.Hype,url:"/api/posts",comparator:function(a){return-1*a.get("created")}}),HM.DisplayHypeCollection=Backbone.Collection.extend({model:HM.Hype,url:"/api/posts",comparator:function(a){return-1*a.get("created")}}),HM.HypeCollection=Backbone.Collection.extend({model:HM.Hype,url:"/api/posts",initialize:function(){this.on("change:sticky",this.sort,this)},SHIFT_FIRST_POST_LEFT:-1,SHIFT_FIRST_POST_RIGHT:1,POSTS_ARE_THE_SAME:0,compareSticky:function(a,b){return a.get("sticky")&&!b.get("sticky")?this.SHIFT_FIRST_POST_LEFT:!a.get("sticky")&&b.get("sticky")?this.SHIFT_FIRST_POST_RIGHT:this.POSTS_ARE_THE_SAME},compareApproved:function(a,b){var c=a.get("approved_at")||0,d=b.get("approved_at")||0;return c>d?this.SHIFT_FIRST_POST_LEFT:d>c?this.SHIFT_FIRST_POST_RIGHT:this.POSTS_ARE_THE_SAME},compareCreated:function(a,b){return a.get("created")>b.get("created")?this.SHIFT_FIRST_POST_LEFT:a.get("created")<b.get("created")?this.SHIFT_FIRST_POST_RIGHT:this.POSTS_ARE_THE_SAME},comparator:function(a,b){var c=this.compareSticky(a,b),d=this.compareApproved(a,b),e=this.compareCreated(a,b);return c!==this.POSTS_ARE_THE_SAME?c:d!==this.POSTS_ARE_THE_SAME?d:e}}),HM.EditorPostCollection=HM.HypeCollection.extend({constructor:function(a,b){this.shouldShowExamplePosts(a)&&(a=HM.EXAMPLE_POSTS,this.postsAreExamples=!0),Backbone.Collection.call(this,a,b)},shouldShowExamplePosts:function(a){return _.isEmpty(a)&&!HM.getParameter("wl_token")},parse:function(a){return 1===a.length&&a[0].error&&(console.log("Discarding apparent error:",a[0]),a=[]),this.shouldShowExamplePosts(a)?(this.postsAreExamples=!0,HM.EXAMPLE_POSTS):(this.postsAreExamples=!1,a)},add:function(a,b){return this.postsAreExamples&&(this._reset(),this.postsAreExamples=!1),Backbone.Collection.prototype.add.call(this,a,b)}});var BaseView=function(a){this.bindings=[],this.delegations=[],Backbone.View.apply(this,[a])};_.extend(BaseView.prototype,Backbone.View.prototype,{bindTo:function(a,b,c){a.unbind(b),a.bind(b,c),this.bindings.push({model:a,ev:b,callback:c})},delegateTo:function(a,b,c,d){a.undelegate(b,c),a.delegate(b,c,d),this.delegations.push({model:a,ev:c,target:b,callback:d})},unbindFromAll:function(){_.each(this.bindings,function(a){a.model.unbind(a.ev,a.callback)}),_.each(this.delegations,function(a){a.model.undelegate(a.target,a.ev,a.callback)}),this.bindings=[],this.delegations=[]},dispose:function(){this.unbindFromAll(),this.unbind(),this.undelegateEvents(),this.stopListening(),"function"==typeof this.onClose&&this.onClose()}}),BaseView.extend=Backbone.View.extend;var hmAnalytics={identified:function(){try{return!!sessionStorage.getItem("identified")||!1}catch(a){return this._identified||!1}},track:function(a,b,c){"undefined"==typeof c&&(c="all"),this.identified()||this.identify(c),"undefined"==typeof analytics||"segment"!==c&&"all"!==c||analytics.track(a,b)},identify:function(a,b,c){if("undefined"==typeof a&&(a="all"),"undefined"!=typeof HM.currentAuthUser&&"undefined"!=typeof HM.currentUser&&"undefined"!=typeof HM.currentUser.tints){var d={username:HM.currentAuthUser.username,email:HM.currentAuthUser.email,subscriptionPlan:HM.currentAuthUser.plan,created:HM.currentAuthUser.created,userId:HM.currentAuthUser.id,industry:HM.currentAuthUser.industry,organization:HM.currentAuthUser.organization,number_of_tints:HM.currentUser.tints.length,number_of_feeds:HM.currentUser.feed_count.active};"object"==typeof b&&$.extend(d,b),"undefined"==typeof analytics||"segment"!==a&&"all"!==a||(analytics.identify(HM.currentAuthUser.email,d),this.identify_location());try{sessionStorage.setItem("identified",!0)}catch(e){this._identified=!0}}},identify_location:function(){function a(a){return b.hasOwnProperty(a)?b[a]:a}var b={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};$.getJSON("https://ipinfo.io?token="+HM.ipinfoioKey+"&callback=?",function(b){analytics.identify(HM.currentAuthUser.email,{ip_country:a(b.country).toLowerCase(),ip_country_code:b.country.toLowerCase(),ip_state:b.region.toLowerCase(),ip_city:b.city.toLowerCase()}),analytics.page()})},kenshoo_track:function(a,b,c,d,e){var f="https:"==document.location.protocol?"https":"http",g=f+"://5212.xg4ken.com/media/redir.php?track=1&id=403713b4-399e-42c0-abc4-b69ae401caab&type="+a+"&val="+b+"&orderId="+c+"&valueCurrency="+e+"&promoCode="+d+"&ref="+document.referrer,h=new Image(1,1);h.src=g,h.onload=function(){}},alias:function(a){"undefined"==typeof a&&(a="all"),"undefined"==typeof mixpanel||"mixpanel"!==a&&"all"!==a||analytics.alias(HM.currentAuthUser.email)}};HM.PersonalizedThemeStylesheet=BaseView.extend({template:"personalizedThemeStylesheetTemplate",initialize:function(a){$(window).on("resize.profileHolder",_.debounce(_.bind(this.layout,this),50)),a.bind&&this.listenTo(this.model,"reset change",this.render,this)},onClose:function(){$(window).off("resize.personalizedThemeStylesheet")},events:{"click .powered-by-logo":"trackLogoClick"},trackLogoClick:function(){hmAnalytics.track("Powered By TINT: Click")},render:function(a){var b=this;return HM.TemplateManager.get(this.template,function(c){var d=_.extend(a||{},b.serializeData());console.log("PersonalizedThemeStylesheet: bg_page_image",d),b.$el.html(Mustache.render(c,d)),HM.PersonalizedThemeStylesheet.loadFonts(b.model),setTimeout(b.layout.bind(b),0)}),this},layout:function(){var a=new HM.TintLayout(this.model),b=a.banner();this.$(".profile-banner").css({height:b.height(),width:b.width(),top:b.top(),left:b.left()}),this.$(".powered-by-logo").css({top:a.poweredByTintTop()})},serializeData:function(){var a=this.model.toJSON(),b=HM.hypeHelper.getDisplayProfile("");/"|'/.test(a.font_secondary)||(a.font_secondary="'"+a.font_secondary+"'"),6===a.color_namebar_buttons.length&&-1===a.color_namebar_buttons.indexOf("#")&&(a.color_namebar_buttons="#"+a.color_namebar_buttons),a.fontcolor_post&&(a.fontcolor_post_darker=HM.PersonalizedThemeStylesheet.hexToRGB(a.fontcolor_post,-40,1)),a.color_namebar_buttons_lighter=HM.PersonalizedThemeStylesheet.hexToRGB(a.color_namebar_buttons,20,1);var c=HM.hypeHelper.shouldRunThemeInIFrame(HM.Themes.info(this.model.get("theme")));return _.extend(a,{background_override:HM.bodyBackgroundOverride,has_bg_color:this.model.hasBackgroundColor(),has_bg_image:this.model.hasBackgroundImage(),bg_image_css:this.model.hasBackgroundImage()&&this.generateBackgroundImageCSS(),should_render_banner:HM.hypeHelper.shouldRenderBanner(this.model),should_add_drop_shadow:"hypeTemplate_atmosphere"!==this.model.get("theme"),should_render_powered_by_tint:this.model.get("powered_by_tint_logo")===!0,theme_is_mosaic:"hypeTemplate_mosaic"==this.model.get("theme"),is_editing:/\/edit/.test(window.location.href),hide_share_buttons:!this.model.get("sharebuttons"),hide_author:!this.model.get("show_author"),lineheight_secondary:parseInt(this.model.get("fontsize_secondary"),10)+2,fontsize_secondary_wide:parseInt(this.model.get("fontsize_secondary"),10)+5,lineheight_secondary_wide:parseInt(this.model.get("fontsize_secondary"),10)+7,fontcolor_post:this.model.isColorString(a.fontcolor_post)?a.fontcolor_post:b.fontcolor_post,color_namebar_buttons_rgba:HM.PersonalizedThemeStylesheet.hexToRGB(a.color_namebar_buttons.replace("#","")),is_iframe_theme:c})},generateBackgroundImageCSS:function(){var a,b=this.model.get("bg_page_image");return/^url\(/.test(b)||(a="url("+b+")"),"https:"!==window.location.protocol||/https/.test(a)||(a=a.replace("http","https")),a}},{loadFonts:function(a,b){for(var c in a.attributes)/font_secondary|font_family/.test(c)&&this.loadFont(a.get(c),b)},loadFont:function(a,b){if(b=b||{},"string"==typeof a){a=a.replace(/ Bold$/,"");var c="https://fonts.googleapis.com/css?family="+encodeURIComponent(a)+":300,400,700";document.createStyleSheet&&$(".ie8").length?document.createStyleSheet(c):$("<link/>",{"class":"googlefont",href:c,rel:"stylesheet",type:"text/css"}).attr(b).appendTo("head")}},hexToRGB:function(a,b,c){a=a.replace("#",""),3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var d=parseInt(a,16),e=[d>>16&255,d>>8&255,255&d],f=.8;return c&&(f=c),/number/.test(typeof b)&&(e=_.map(e,function(a){var c=a+b;return c>255?c=255:0>c&&(c=0),c})),"rgba("+e[0]+","+e[1]+","+e[2]+", "+f+")"}}),HM.ShareTooltipView=BaseView.extend({template:"shareTooltipTemplate",initialize:function(a){this.model=a.model},serializeData:function(){return{twurl:this.model.twurl,fburl:this.model.fburl}},render:function(){var a=this;return HM.TemplateManager.get(a.template,function(b){a.$el.html(Mustache.render(b,a.serializeData()))}),this}}),$(function(){var a=new HM.PopupModalView;$(document.body).append(a.el),viewportUnitsBuggyfill.init(),HM.CompatiblePostMessage.listenTo("bootstrap",function(b){viewportUnitsBuggyfill.refresh(),a.bootstrap(b)}),HM.CompatiblePostMessage.listenTo("show",function(b){a.show(b.index)}),HM.CompatiblePostMessage.listenTo("hide",function(b){a.close($.Event())})});